---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: kubesphere
  namespace: kubesphere-system

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: kubesphere
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-admin
subjects:
  - kind: ServiceAccount
    name: kubesphere
    namespace: kubesphere-system

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    kubesphere.io/creator: system
    iam.kubesphere.io/aggregation-roles: '["role-template-manage-alerting-messages","role-template-manage-alerting-policies","role-template-manage-app-workloads","role-template-manage-cluster-settings","role-template-manage-components","role-template-manage-crds","role-template-manage-members","role-template-manage-network-policies","role-template-manage-nodes","role-template-manage-projects","role-template-manage-roles","role-template-manage-storageclasses","role-template-manage-volumes","role-template-view-alerting-messages","role-template-view-alerting-policies","role-template-view-app-workloads","role-template-view-cluster-monitoring","role-template-view-members","role-template-view-network-policies","role-template-view-nodes","role-template-view-projects","role-template-view-roles","role-template-view-storageclasses","role-template-view-volume-snapshots","role-template-view-volumes"]'
  name: cluster-admin
rules:
  - apiGroups:
      - '*'
    resources:
      - '*'
    verbs:
      - '*'
  - nonResourceURLs:
      - '*'
    verbs:
      - '*'

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    kubesphere.io/creator: system
    iam.kubesphere.io/aggregation-roles: '["role-template-view-alerting-messages","role-template-view-alerting-policies","role-template-view-app-workloads","role-template-view-cluster-monitoring","role-template-view-members","role-template-view-network-policies","role-template-view-nodes","role-template-view-projects","role-template-view-roles","role-template-view-storageclasses","role-template-view-volume-snapshots","role-template-view-volumes"]'
  name: cluster-viewer
rules:
  - apiGroups:
      - '*'
    resources:
      - '*'
    verbs:
      - get
      - list
      - watch
  - nonResourceURLs:
      - '*'
    verbs:
      - 'GET'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRole
metadata:
  name: anonymous
rules:
  - apiGroups:
      - openpitrix.io
    resources:
      - apps
    verbs:
      - get
      - list
  - apiGroups:
      - config.kubesphere.io
    resources:
      - configs
    verbs:
      - get
      - list
  - apiGroups:
      - devops.kubesphere.io
    resources:
      - s2ibinaries/file
    verbs:
      - get

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRole
metadata:
  annotations:
    iam.kubesphere.io/rego-override: |-
      package authz
      default allow = false
      allow = true {
        allowedResources := ["users","clustermembers","workspacemembers","members"]
        allowedResources[_] == input.Resource
        input.User.Name == input.Name
      }
      allow = true {
        input.APIGroup == "tenant.kubesphere.io"
        input.KubernetesRequest == false
        allowedVerbs := ["get","list","watch"]
        allowedVerbs[_] == input.Verb
      }
  name: authenticated
rules:
  - apiGroups:
      - openpitrix.io
    resources:
      - clusters/namespaces
    verbs:
      - '*'
  - apiGroups:
      - config.kubesphere.io
    resources:
      - configs
    verbs:
      - get
      - list
  - apiGroups:
      - iam.kubesphere.io
    resources:
      - users
    verbs:
      - list
  - apiGroups:
      - resources.kubesphere.io
    resources:
      - registry
      - git
    verbs:
      - get
  - apiGroups:
      - resources.kubesphere.io
    resources:
      - clusters
    verbs:
      - get
  - apiGroups:
      - '*'
    resources:
      - storageclasses
      - storageclasscapabilities
    verbs:
      - get
      - list
  - apiGroups:
      - openpitrix.io
    resources:
      - apps
      - apps/audits
      - categories
      - attachments
      - applications
    verbs:
      - get
      - list
  - apiGroups:
      - openpitrix.io
    resources:
      - apps
      - apps/versions
      - repos
    verbs:
      - '*'
  - apiGroups:
      - monitoring.kubesphere.io
    resources:
      - cluster
    verbs:
      - list
  - apiGroups:
      - devops.kubesphere.io
    resources:
      - s2ibuildertemplates
      - search
    verbs:
      - list
  - apiGroups:
      - resources.kubesphere.io
    resources:
      - namespaces
    verbs:
      - list
  - apiGroups:
      - devops.kubesphere.io
    resources:
      - tojenkinsfile
      - tojson
      - scms/verify
      - scms/server
      - scms/organizations
    verbs:
      - create
      - list
      - get
  - apiGroups:
      - devops.kubesphere.io
    resources:
      - crumbissuer
    verbs:
      - list
  - apiGroups:
      - alerting.kubesphere.io
    resources:
      - comment
    verbs:
      - list
  - apiGroups:
      - notification.kubesphere.io
    resources:
      - addresses
    verbs:
      - list

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRole
metadata:
  annotations:
    iam.kubesphere.io/aggregation-roles: '["role-template-manage-clusters","role-template-view-clusters","role-template-view-roles","role-template-manage-roles","role-template-view-roles","role-template-view-workspaces","role-template-manage-workspaces","role-template-manage-users","role-template-view-roles","role-template-view-users","role-template-manage-app-templates","role-template-view-app-templates","role-template-manage-platform-settings"]'
    kubesphere.io/creator: admin
  name: platform-admin
rules:
  - apiGroups:
      - '*'
    resources:
      - '*'
    verbs:
      - '*'
  - nonResourceURLs:
      - '*'
    verbs:
      - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRole
metadata:
  annotations:
    iam.kubesphere.io/aggregation-roles: '["role-template-view-app-templates"]'
    kubesphere.io/creator: admin
  name: platform-regular
rules: []

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRole
metadata:
  annotations:
    iam.kubesphere.io/role-template-rules: '{"basic": "view"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-basic
rules: []

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRole
metadata:
  annotations:
    iam.kubesphere.io/aggregation-roles: '["role-template-view-users","role-template-manage-users","role-template-view-roles","role-template-manage-roles"]'
    kubesphere.io/creator: admin
  name: users-manager
rules:
  - apiGroups:
      - '*'
    resources:
      - users
      - users/loginrecords
      - globalroles
    verbs:
      - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRole
metadata:
  annotations:
    iam.kubesphere.io/aggregation-roles: '["role-template-view-workspaces","role-template-manage-workspaces","role-template-view-users"]'
    kubesphere.io/creator: admin
  name: workspaces-manager
rules:
  - apiGroups:
      - '*'
    resources:
      - abnormalworkloads
      - quotas
      - workloads
      - volumesnapshots
      - dashboards
      - configmaps
      - endpoints
      - events
      - limitranges
      - namespaces
      - persistentvolumeclaims
      - pods
      - podtemplates
      - replicationcontrollers
      - resourcequotas
      - secrets
      - serviceaccounts
      - services
      - applications
      - controllerrevisions
      - deployments
      - replicasets
      - statefulsets
      - daemonsets
      - meshpolicies
      - cronjobs
      - jobs
      - devopsprojects
      - devops
      - 'pipelines'
      - 'pipelines/runs'
      - 'pipelines/branches'
      - 'pipelines/checkScriptCompile'
      - 'pipelines/consolelog'
      - 'pipelines/scan'
      - 'pipelines/sonarstatus'
      - 'checkCron'
      - 'credentials'
      - 'credentials/usage'
      - s2ibinaries
      - s2ibinaries/file
      - s2ibuilders
      - s2ibuildertemplates
      - s2iruns
      - events
      - ingresses
      - router
      - filters
      - pods
      - pods/log
      - namespacenetworkpolicies
      - workspacenetworkpolicies
      - networkpolicies
      - podsecuritypolicies
      - rolebindings
      - roles
      - members
      - servicepolicies
      - federatedapplications
      - federatedconfigmaps
      - federateddeployments
      - federatedingresses
      - federatedjobs
      - federatedlimitranges
      - federatednamespaces
      - federatedpersistentvolumeclaims
      - federatedreplicasets
      - federatedsecrets
      - federatedserviceaccounts
      - federatedservices
      - federatedservicestatuses
      - federatedstatefulsets
      - federatedworkspaces
      - workspaces
      - workspaceroles
      - workspacemembers
      - workspacemembers/namespaces
      - workspacemembers/devops
      - workspacerolebindings
    verbs:
      - '*'
  - apiGroups:
      - '*'
    resources:
      - users
      - users/loginrecords
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - openpitrix.io
    resources:
      - repos
      - apps
      - apps/versions
      - categories
      - apps/audits
    verbs:
      - '*'
  - apiGroups:
      - '*'
    resources:
      - clusters
      - cluster
    verbs:
      - list


---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRole
metadata:
  annotations:
    iam.kubesphere.io/module: Clusters Management
    iam.kubesphere.io/role-template-rules: '{"clusters": "view"}'
    kubesphere.io/alias-name: Clusters View
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-clusters
rules:
  - apiGroups:
      - '*'
    resources:
      - configmaps
      - endpoints
      - events
      - limitranges
      - namespaces
      - nodes
      - persistentvolumeclaims
      - pods
      - podtemplates
      - replicationcontrollers
      - resourcequotas
      - secrets
      - serviceaccounts
      - services
      - applications
      - controllerrevisions
      - deployments
      - daemonsets
      - replicasets
      - statefulsets
      - meshpolicies
      - cronjobs
      - jobs
      - federatedservicestatuses
      - devopsprojects
      - devops
      - 'pipelines'
      - 'pipelines/runs'
      - 'pipelines/branches'
      - 'pipelines/checkScriptCompile'
      - 'pipelines/consolelog'
      - 'pipelines/scan'
      - 'pipelines/sonarstatus'
      - 'checkCron'
      - 'credentials'
      - 'credentials/usage'
      - s2ibinaries
      - s2ibinaries/file
      - s2ibuilders
      - s2ibuildertemplates
      - s2iruns
      - events
      - ingresses
      - router
      - filters
      - pods
      - namespacenetworkpolicies
      - workspacenetworkpolicies
      - destinationrules
      - envoyfilters
      - gateways
      - serviceentries
      - sidecars
      - virtualservices
      - networkpolicies
      - podsecuritypolicies
      - rolebindings
      - roles
      - servicepolicies
      - strategies
      - storageclasses
      - federatedconfigmaps
      - federateddeployments
      - federatedingresses
      - federatedjobs
      - federatedlimitranges
      - federatednamespaces
      - federatedpersistentvolumeclaims
      - federatedreplicasets
      - federatedsecrets
      - federatedserviceaccounts
      - federatedservices
      - federatedstatefulsets
      - devops
      - devopsprojects
      - clusters
      - cluster
      - clusterrolebindings
      - clusterroles
      - clustermembers
      - components
      - componenthealth
      - volumesnapshots
      - quotas
      - nodes/pods
      - pods/log
      - nodes
      - abnormalworkloads
      - customresourcedefinitions
      - workspaces
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - monitoring.kubesphere.io
      - notification.kubesphere.io
      - logging.kubesphere.io
    resources:
      - '*'
    verbs:
      - get
      - list
      - watch
  - nonResourceURLs:
      - '*'
    verbs:
      - 'GET'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRole
metadata:
  annotations:
    iam.kubesphere.io/module: Clusters Management
    iam.kubesphere.io/role-template-rules: '{"clusters": "manage"}'
    kubesphere.io/alias-name: Clusters Management
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-clusters
rules:
  - apiGroups:
      - '*'
    resources:
      - configmaps
      - endpoints
      - events
      - limitranges
      - namespaces
      - nodes
      - persistentvolumeclaims
      - pods
      - podtemplates
      - replicationcontrollers
      - resourcequotas
      - secrets
      - serviceaccounts
      - services
      - applications
      - controllerrevisions
      - deployments
      - daemonsets
      - replicasets
      - statefulsets
      - meshpolicies
      - cronjobs
      - jobs
      - federatedservicestatuses
      - devopsprojects
      - devops
      - s2ibinaries
      - s2ibinaries/file
      - s2ibuilders
      - s2ibuildertemplates
      - s2iruns
      - events
      - ingresses
      - router
      - filters
      - pods
      - namespacenetworkpolicies
      - workspacenetworkpolicies
      - destinationrules
      - envoyfilters
      - gateways
      - serviceentries
      - sidecars
      - virtualservices
      - networkpolicies
      - podsecuritypolicies
      - rolebindings
      - roles
      - servicepolicies
      - strategies
      - storageclasses
      - federatedconfigmaps
      - federateddeployments
      - federatedingresses
      - federatedjobs
      - federatedlimitranges
      - federatednamespaces
      - federatedpersistentvolumeclaims
      - federatedreplicasets
      - federatedsecrets
      - federatedserviceaccounts
      - federatedservices
      - federatedstatefulsets
      - devops
      - devopsprojects
      - clusters
      - cluster
      - clusterrolebindings
      - clusterroles
      - clustermembers
      - components
      - componenthealth
      - volumesnapshots
      - quotas
      - nodes/pods
      - pods/log
      - nodes
      - abnormalworkloads
      - customresourcedefinitions
    verbs:
      - '*'
  - apiGroups:
      - monitoring.kubesphere.io
      - notification.kubesphere.io
      - logging.kubesphere.io
    resources:
      - '*'
    verbs:
      - '*'
  - apiGroups:
      - 'resources.kubesphere.io'
    resources:
      - 'workspaces'
    verbs:
      - list
  - apiGroups:
      - 'tenant.kubesphere.io'
    resources:
      - 'workspaces'
    verbs:
      - 'patch'
      - 'update'
  - nonResourceURLs:
      - '*'
    verbs:
      - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRole
metadata:
  annotations:
    iam.kubesphere.io/module: Access Control
    iam.kubesphere.io/role-template-rules: '{"workspaces": "view"}'
    kubesphere.io/alias-name: Workspaces View
  labels:
    iam.kubesphere.io/role-template: "true"
    kubefed.io/managed: "true"
  name: role-template-view-workspaces
rules:
  - apiGroups:
      - '*'
    resources:
      - abnormalworkloads
      - quotas
      - workloads
      - volumesnapshots
      - dashboards
      - configmaps
      - endpoints
      - events
      - limitranges
      - namespaces
      - persistentvolumeclaims
      - pods
      - podtemplates
      - replicationcontrollers
      - resourcequotas
      - secrets
      - serviceaccounts
      - services
      - applications
      - controllerrevisions
      - deployments
      - replicasets
      - statefulsets
      - daemonsets
      - meshpolicies
      - cronjobs
      - jobs
      - devopsprojects
      - devops
      - 'pipelines'
      - 'pipelines/runs'
      - 'pipelines/branches'
      - 'pipelines/checkScriptCompile'
      - 'pipelines/consolelog'
      - 'pipelines/scan'
      - 'pipelines/sonarstatus'
      - 'checkCron'
      - 'credentials'
      - 'credentials/usage'
      - s2ibinaries
      - s2ibinaries/file
      - s2ibuilders
      - s2ibuildertemplates
      - s2iruns
      - events
      - ingresses
      - router
      - filters
      - pods
      - pods/log
      - namespacenetworkpolicies
      - workspacenetworkpolicies
      - networkpolicies
      - podsecuritypolicies
      - rolebindings
      - roles
      - members
      - servicepolicies
      - federatedconfigmaps
      - federateddeployments
      - federatedingresses
      - federatedjobs
      - federatedlimitranges
      - federatednamespaces
      - federatedpersistentvolumeclaims
      - federatedreplicasets
      - federatedsecrets
      - federatedserviceaccounts
      - federatedservices
      - federatedservicestatuses
      - federatedstatefulsets
      - federatedworkspaces
      - workspaces
      - workspaceroles
      - workspacemembers
      - workspacemembers/namespaces
      - workspacemembers/devops
      - workspacerolebindings
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - openpitrix.io
    resources:
      - repos
      - repos/action
      - repos/events
      - apps
      - apps/versions
      - categories
      - apps/audits
    verbs:
      - get
      - list
  - apiGroups:
      - '*'
    resources:
      - clusters
      - cluster
    verbs:
      - list

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRole
metadata:
  annotations:
    iam.kubesphere.io/module: Access Control
    iam.kubesphere.io/role-template-rules: '{"workspaces": "manage"}'
    kubesphere.io/alias-name: Workspaces Management
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-workspaces
rules:
  - apiGroups:
      - '*'
    resources:
      - abnormalworkloads
      - quotas
      - workloads
      - volumesnapshots
      - dashboards
      - configmaps
      - endpoints
      - events
      - limitranges
      - namespaces
      - persistentvolumeclaims
      - podtemplates
      - replicationcontrollers
      - resourcequotas
      - secrets
      - serviceaccounts
      - services
      - applications
      - controllerrevisions
      - deployments
      - replicasets
      - statefulsets
      - daemonsets
      - meshpolicies
      - cronjobs
      - jobs
      - devopsprojects
      - devops
      - 'pipelines'
      - 'pipelines/runs'
      - 'pipelines/branches'
      - 'pipelines/checkScriptCompile'
      - 'pipelines/consolelog'
      - 'pipelines/scan'
      - 'pipelines/sonarstatus'
      - 'checkCron'
      - 'credentials'
      - 'credentials/usage'
      - s2ibinaries
      - s2ibinaries/file
      - s2ibuilders
      - s2ibuildertemplates
      - s2iruns
      - events
      - ingresses
      - router
      - filters
      - pods
      - pods/log
      - namespacenetworkpolicies
      - workspacenetworkpolicies
      - networkpolicies
      - podsecuritypolicies
      - rolebindings
      - roles
      - members
      - servicepolicies
      - federatedapplications
      - federatedconfigmaps
      - federateddeployments
      - federatedingresses
      - federatedjobs
      - federatedlimitranges
      - federatednamespaces
      - federatedpersistentvolumeclaims
      - federatedreplicasets
      - federatedsecrets
      - federatedserviceaccounts
      - federatedservices
      - federatedservicestatuses
      - federatedstatefulsets
      - federatedworkspaces
      - workspaces
      - workspaceroles
      - workspacemembers
      - workspacemembers/namespaces
      - workspacemembers/devops
      - workspacerolebindings
      - repos
      - repos/action
      - repos/events
      - apps
      - apps/versions
      - categories
      - apps/audits
    verbs:
      - '*'
  - apiGroups:
      - '*'
    resources:
      - clusters
    verbs:
      - list


---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRole
metadata:
  annotations:
    iam.kubesphere.io/module: Access Control
    iam.kubesphere.io/role-template-rules: '{"users": "view"}'
    kubesphere.io/alias-name: Users View
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-users
rules:
  - apiGroups:
      - '*'
    resources:
      - users
      - users/loginrecords
    verbs:
      - get
      - list
      - watch

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-roles"]'
    iam.kubesphere.io/module: Access Control
    iam.kubesphere.io/role-template-rules: '{"users": "manage"}'
    kubesphere.io/alias-name: Users Management
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-users
rules:
  - apiGroups:
      - '*'
    resources:
      - users
      - users/loginrecords
    verbs:
      - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRole
metadata:
  annotations:
    iam.kubesphere.io/module: Access Control
    iam.kubesphere.io/role-template-rules: '{"roles": "view"}'
    kubesphere.io/alias-name: Roles View
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-roles
rules:
  - apiGroups:
      - iam.kubesphere.io
    resources:
      - globalroles
    verbs:
      - get
      - list
      - watch

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-roles"]'
    iam.kubesphere.io/module: Access Control
    iam.kubesphere.io/role-template-rules: '{"roles": "manage"}'
    kubesphere.io/alias-name: Roles Management
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-roles
rules:
  - apiGroups:
      - '*'
    resources:
      - globalroles
    verbs:
      - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRole
metadata:
  annotations:
    iam.kubesphere.io/module: Apps Management
    iam.kubesphere.io/role-template-rules: '{"app-templates": "view"}'
    kubesphere.io/alias-name: App Templates View
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-app-templates
rules:
  - apiGroups:
      - openpitrix.io
    resources:
      - apps
      - apps/versions
      - categories
    verbs:
      - get
      - list

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRole
metadata:
  annotations:
    iam.kubesphere.io/module: Apps Management
    iam.kubesphere.io/role-template-rules: '{"app-templates": "manage"}'
    kubesphere.io/alias-name: App Templates Management
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-app-templates
rules:
  - apiGroups:
      - openpitrix.io
    resources:
      - '*'
    verbs:
      - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRole
metadata:
  annotations:
    iam.kubesphere.io/module: Platform Settings
    iam.kubesphere.io/role-template-rules: '{"platform-settings": "manage"}'
    kubesphere.io/alias-name: Platform Settings Management
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-platform-settings
rules:
  - apiGroups:
      - logging.kubesphere.io
    resources:
      - '*'
    verbs:
      - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRoleBinding
metadata:
  name: admin
roleRef:
  apiGroup: iam.kubesphere.io/v1alpha2
  kind: GlobalRole
  name: platform-admin
subjects:
  - apiGroup: iam.kubesphere.io/v1alpha2
    kind: User
    name: admin

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRoleBinding
metadata:
  name: anonymous
roleRef:
  apiGroup: iam.kubesphere.io/v1alpha2
  kind: GlobalRole
  name: anonymous
subjects:
  - apiGroup: iam.kubesphere.io/v1alpha2
    kind: Group
    name: system:unauthenticated

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: GlobalRoleBinding
metadata:
  name: authenticated
roleRef:
  apiGroup: iam.kubesphere.io/v1alpha2
  kind: GlobalRole
  name: authenticated
subjects:
  - apiGroup: iam.kubesphere.io/v1alpha2
    kind: Group
    name: system:authenticated

---
apiVersion: tenant.kubesphere.io/v1alpha2
kind: WorkspaceTemplate
metadata:
  annotations:
    kubesphere.io/creator: admin
  name: system-workspace
spec:
  placement:
    clusterSelector: {}
  template:
    spec:
      manager: admin
      networkIsolation: false

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: WorkspaceRole
metadata:
  annotations:
    iam.kubesphere.io/module: Projects Management
    iam.kubesphere.io/role-template-rules: '{"projects": "view"}'
    kubesphere.io/alias-name: Projects View
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-projects
rules:
  - apiGroups:
      - '*'
    resources:
      - namespaces
      - configmaps
      - endpoints
      - events
      - limitranges
      - persistentvolumeclaims
      - podtemplates
      - replicationcontrollers
      - resourcequotas
      - secrets
      - serviceaccounts
      - services
      - applications
      - controllerrevisions
      - deployments
      - replicasets
      - statefulsets
      - daemonsets
      - meshpolicies
      - cronjobs
      - jobs
      - s2ibinaries
      - s2ibinaries/file
      - s2ibuilders
      - s2ibuildertemplates
      - s2iruns
      - events
      - ingresses
      - router
      - pods
      - pods/log
      - namespacenetworkpolicies
      - networkpolicies
      - podsecuritypolicies
      - rolebindings
      - roles
      - members
      - servicepolicies
      - federatedapplications
      - federatedconfigmaps
      - federateddeployments
      - federatedingresses
      - federatedjobs
      - federatedlimitranges
      - federatednamespaces
      - federatedpersistentvolumeclaims
      - federatedreplicasets
      - federatedsecrets
      - federatedserviceaccounts
      - federatedservices
      - federatedservicestatuses
      - federatedstatefulsets
      - workspaces
      - quotas
      - abnormalworkloads
      - workloads
      - router
      - dashboards
      - strategies
      - volumesnapshots
    verbs:
      - get
      - list
      - watch

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: WorkspaceRole
metadata:
  annotations:
    iam.kubesphere.io/module: Projects Management
    iam.kubesphere.io/role-template-rules: '{"projects": "create"}'
    kubesphere.io/alias-name: Projects Create
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-create-projects
rules:
  - apiGroups:
      - '*'
    resources:
      - workspaces
      - workspacemembers
      - quotas
      - abnormalworkloads
      - pods
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - '*'
    resources:
      - 'namespaces'
      - 'federatednamespaces'
    verbs:
      - create
      - watch

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: WorkspaceRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-projects","role-template-view-users","role-template-create-projects"]'
    iam.kubesphere.io/module: Projects Management
    iam.kubesphere.io/role-template-rules: '{"projects": "manage"}'
    kubesphere.io/alias-name: Projects Management
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-projects
rules:
  - apiGroups:
      - '*'
    resources:
      - namespaces
      - configmaps
      - endpoints
      - events
      - limitranges
      - persistentvolumeclaims
      - podtemplates
      - replicationcontrollers
      - resourcequotas
      - secrets
      - serviceaccounts
      - services
      - applications
      - controllerrevisions
      - deployments
      - replicasets
      - statefulsets
      - daemonsets
      - meshpolicies
      - cronjobs
      - jobs
      - s2ibinaries
      - s2ibinaries/file
      - s2ibuilders
      - s2ibuildertemplates
      - s2iruns
      - events
      - ingresses
      - router
      - pods
      - pods/log
      - namespacenetworkpolicies
      - networkpolicies
      - podsecuritypolicies
      - rolebindings
      - roles
      - members
      - servicepolicies
      - federatedapplications
      - federatedconfigmaps
      - federateddeployments
      - federatedingresses
      - federatedjobs
      - federatedlimitranges
      - federatednamespaces
      - federatedpersistentvolumeclaims
      - federatedreplicasets
      - federatedsecrets
      - federatedserviceaccounts
      - federatedservices
      - federatedservicestatuses
      - federatedstatefulsets
      - workspaces
      - quotas
      - abnormalworkloads
      - workloads
      - router
      - dashboards
      - strategies
      - volumesnapshots
    verbs:
      - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: WorkspaceRole
metadata:
  annotations:
    iam.kubesphere.io/module: DevOps Management
    iam.kubesphere.io/role-template-rules: '{"devops": "view"}'
    kubesphere.io/alias-name: DevOps View
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-devops
rules:
  - apiGroups:
      - '*'
    resources:
      - 'pipelines'
      - 'pipelines/runs'
      - 'pipelines/branches'
      - 'pipelines/checkScriptCompile'
      - 'pipelines/consolelog'
      - 'pipelines/scan'
      - 'pipelines/sonarstatus'
      - 'checkCron'
      - 'credentials'
      - 'credentials/usage'
      - 'roles'
      - 'members'
      - 'devops'
      - 'devopsprojects'
    verbs:
      - get
      - list
      - watch

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: WorkspaceRole
metadata:
  annotations:
    iam.kubesphere.io/module: DevOps Management
    iam.kubesphere.io/role-template-rules: '{"devops": "create"}'
    kubesphere.io/alias-name: DevOps Create
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-create-devops
rules:
  - apiGroups:
      - '*'
    resources:
      - 'devops'
      - 'devopsprojects'
    verbs:
      - create
      - watch

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: WorkspaceRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-devops","role-template-create-devops"]'
    iam.kubesphere.io/module: DevOps Management
    iam.kubesphere.io/role-template-rules: '{"devops": "manage"}'
    kubesphere.io/alias-name: DevOps Management
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-devops
rules:
  - apiGroups:
      - '*'
    resources:
      - 'pipelines'
      - 'pipelines/runs'
      - 'pipelines/branches'
      - 'pipelines/checkScriptCompile'
      - 'pipelines/consolelog'
      - 'pipelines/scan'
      - 'pipelines/sonarstatus'
      - 'checkCron'
      - 'credentials'
      - 'credentials/usage'
      - 'roles'
      - 'members'
    verbs:
      - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: WorkspaceRole
metadata:
  annotations:
    iam.kubesphere.io/module: Apps Management
    iam.kubesphere.io/role-template-rules: '{"app-repos": "view"}'
    kubesphere.io/alias-name: Workspace App Repos View
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-app-repos
rules:
  - apiGroups:
      - openpitrix.io
    resources:
      - repos
      - repos/events
    verbs:
      - get
      - list
      - watch

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: WorkspaceRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-app-repos"]'
    iam.kubesphere.io/module: Apps Management
    iam.kubesphere.io/role-template-rules: '{"app-repos": "manage"}'
    kubesphere.io/alias-name: Workspace App Repos Management
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-app-repos
rules:
  - apiGroups:
      - 'openpitrix.io'
    resources:
      - 'repos'
      - 'repos/events'
      - 'repos/action'
    verbs:
      - '*'



---
apiVersion: iam.kubesphere.io/v1alpha2
kind: WorkspaceRole
metadata:
  annotations:
    iam.kubesphere.io/module: Apps Management
    iam.kubesphere.io/role-template-rules: '{"app-templates": "view"}'
    kubesphere.io/alias-name: Workspace App Templates View
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-app-templates
rules:
  - apiGroups:
      - 'openpitrix.io'
    resources:
      - '*'
    verbs:
      - get
      - list
      - watch

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: WorkspaceRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-app-templates"]'
    iam.kubesphere.io/module: Apps Management
    iam.kubesphere.io/role-template-rules: '{"app-templates": "manage"}'
    kubesphere.io/alias-name: Workspace App Templates Management
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-app-templates
rules:
  - apiGroups:
      - 'openpitrix.io'
    resources:
      - '*'
    verbs:
      - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: WorkspaceRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-users"]'
    iam.kubesphere.io/module: Access Control
    iam.kubesphere.io/role-template-rules: '{"roles": "view"}'
    kubesphere.io/alias-name: Workspace Roles View
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-roles
rules:
  - apiGroups:
      - '*'
    resources:
      - workspaceroles
    verbs:
      - get
      - list
      - watch


---
apiVersion: iam.kubesphere.io/v1alpha2
kind: WorkspaceRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-users", "role-template-view-roles"]'
    iam.kubesphere.io/module: Access Control
    iam.kubesphere.io/role-template-rules: '{"roles": "manage"}'
    kubesphere.io/alias-name: Workspace Roles Management
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-roles
rules:
  - apiGroups:
      - '*'
    resources:
      - workspaceroles
    verbs:
      - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: WorkspaceRole
metadata:
  annotations:
    iam.kubesphere.io/module: Access Control
    iam.kubesphere.io/role-template-rules: '{"members": "view"}'
    kubesphere.io/alias-name: Workspace Members View
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-users
rules:
  - apiGroups:
      - '*'
    resources:
      - 'workspacemembers'
    verbs:
      - get
      - list
      - watch


---
apiVersion: iam.kubesphere.io/v1alpha2
kind: WorkspaceRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-users","role-template-view-roles"]'
    iam.kubesphere.io/module: Access Control
    iam.kubesphere.io/role-template-rules: '{"members": "manage"}'
    kubesphere.io/alias-name: Workspace Members Management
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-users
rules:
  - apiGroups:
      - '*'
    resources:
      - 'workspacemembers'
    verbs:
      - '*'
  - apiGroups:
      - '*'
    resources:
      - workspaceroles
    verbs:
      - list
      - get
      - watch

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: WorkspaceRole
metadata:
  annotations:
    iam.kubesphere.io/role-template-rules: '{"basic": "view"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-basic
rules:
  - apiGroups:
      - monitoring.kubesphere.io
    resources:
      - namespaces
      - workloads
    verbs:
      - get
      - list
  - apiGroups:
      - '*'
    resources:
      - namespaces
    verbs:
      - watch
  - apiGroups:
      - iam.kubesphere.io
    resources:
      - workspacemembers
    verbs:
      - list

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: WorkspaceRole
metadata:
  annotations:
    iam.kubesphere.io/module: Workspace Settings
    iam.kubesphere.io/role-template-rules: '{"workspace-settings": "manage"}'
    kubesphere.io/alias-name: Workspace Settings
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-workspace-settings
rules:
  - apiGroups:
      - '*'
    resources:
      - 'workspaces'
    verbs:
      - '*'

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/module: Cluster Resources Management
    kubesphere.io/alias-name: CRD Management
    iam.kubesphere.io/role-template-rules: '{"customresources": "manage"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-crds
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '[role-template-view-alerting-messages"]'
    iam.kubesphere.io/module: Monitoring & Alerting
    kubesphere.io/alias-name: Alerting Messages Management
    iam.kubesphere.io/role-template-rules: '{"alert-messages": "manage"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-alerting-messages
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-alerting-policies", "role-template-view-alerting-messages"]'
    iam.kubesphere.io/module: Monitoring & Alerting
    kubesphere.io/alias-name: Alerting Policies Management
    iam.kubesphere.io/role-template-rules: '{"alert-policies": "manage"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-alerting-policies
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-app-workloads", "role-template-view-projects"]'
    iam.kubesphere.io/module: Project Resources Management
    kubesphere.io/alias-name: Application Workloads Management
    iam.kubesphere.io/role-template-rules: '{"deployments": "manage", "statefulsets": "manage", "daemonsets": "manage", "jobs": "manage", "cronjobs": "manage", "pods": "manage", "services": "manage", "ingresses": "manage"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-app-workloads
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/module: Cluster Settings
    kubesphere.io/alias-name: Cluster Settings
    iam.kubesphere.io/role-template-rules: '{"cluster-settings": "manage"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-cluster-settings
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/module: Cluster Resources Management
    kubesphere.io/alias-name: Components Management
    iam.kubesphere.io/role-template-rules: '{"components": "manage"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-components
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-roles", "role-template-view-members"]'
    iam.kubesphere.io/module: Access Control
    kubesphere.io/alias-name: Cluster Members Management
    iam.kubesphere.io/role-template-rules: '{"members": "manage"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-members
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-network-policies"]'
    iam.kubesphere.io/module: Network Management
    kubesphere.io/alias-name: Network Policies Management
    iam.kubesphere.io/role-template-rules: '{"networkpolicies": "manage"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-network-policies
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-nodes"]'
    iam.kubesphere.io/module: Cluster Resources Management
    kubesphere.io/alias-name: Nodes Management
    iam.kubesphere.io/role-template-rules: '{"nodes": "manage"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-nodes
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-projects"]'
    iam.kubesphere.io/module: Project Resources Management
    kubesphere.io/alias-name: Projects Management
    iam.kubesphere.io/role-template-rules: '{"projects": "manage"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-projects
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-roles"]'
    iam.kubesphere.io/module: Access Control
    kubesphere.io/alias-name: Cluster Roles Management
    iam.kubesphere.io/role-template-rules: '{"roles": "manage"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-roles
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-volumes", "role-template-view-storageclasses"]'
    iam.kubesphere.io/module: Storage Management
    kubesphere.io/alias-name: StorageClasses Management
    iam.kubesphere.io/role-template-rules: '{"storageclasses": "manage"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-storageclasses
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-volumes", "role-template-view-storageclasses"]'
    iam.kubesphere.io/module: Storage Management
    kubesphere.io/alias-name: Volumes Management
    iam.kubesphere.io/role-template-rules: '{"volumes": "manage"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-manage-volumes
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/module: Monitoring & Alerting
    kubesphere.io/alias-name: Alerting Messages View
    iam.kubesphere.io/role-template-rules: '{"alert-messages": "view"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-alerting-messages
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-alerting-messages"]'
    iam.kubesphere.io/module: Monitoring & Alerting
    kubesphere.io/alias-name: Alerting Policies View
    iam.kubesphere.io/role-template-rules: '{"alert-policies": "view"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-alerting-policies
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-projects"]'
    iam.kubesphere.io/module: Project Resources Management
    kubesphere.io/alias-name: Application Workloads View
    iam.kubesphere.io/role-template-rules: '{"deployments": "view", "statefulsets": "view", "daemonsets": "view", "jobs": "view", "cronjobs": "view", "pods": "view", "services": "view", "ingresses": "view"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-app-workloads
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/module: Monitoring & Alerting
    kubesphere.io/alias-name: Cluster Monitoring View
    iam.kubesphere.io/role-template-rules: '{"monitoring": "view"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-cluster-monitoring
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/module: Access Control
    kubesphere.io/alias-name: Cluster Members View
    iam.kubesphere.io/role-template-rules: '{"members": "view"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-members
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/module: Network Management
    kubesphere.io/alias-name: Network Policies View
    iam.kubesphere.io/role-template-rules: '{"networkpolicies": "view"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-network-policies
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/module: Cluster Resources Management
    kubesphere.io/alias-name: Nodes View
    iam.kubesphere.io/role-template-rules: '{"nodes": "view"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-nodes
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/module: Project Resources Management
    kubesphere.io/alias-name: Projects View
    iam.kubesphere.io/role-template-rules: '{"projects": "view"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-projects
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/module: Access Control
    kubesphere.io/alias-name: Cluster Roles View
    iam.kubesphere.io/role-template-rules: '{"roles": "view"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-roles
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-volumes"]'
    iam.kubesphere.io/module: Storage Management
    kubesphere.io/alias-name: StorageClasses View
    iam.kubesphere.io/role-template-rules: '{"storageclasses": "view"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-storageclasses
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/dependencies: '["role-template-view-volumes"]'
    iam.kubesphere.io/module: Storage Management
    kubesphere.io/alias-name: Volume Snapshots View
    iam.kubesphere.io/role-template-rules: '{"volume-snapshots": "view"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-volume-snapshots
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    iam.kubesphere.io/module: Storage Management
    kubesphere.io/alias-name: Volumes View
    iam.kubesphere.io/role-template-rules: '{"volumes": "view"}'
  labels:
    iam.kubesphere.io/role-template: "true"
  name: role-template-view-volumes
rules: []

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: workspace-admin
role:
  apiVersion: iam.kubesphere.io/v1alpha2
  kind: WorkspaceRole
  metadata:
    annotations:
      iam.kubesphere.io/aggregation-roles: '["role-template-manage-workspace-settings","role-template-manage-projects","role-template-view-projects","role-template-create-projects","role-template-create-devops","role-template-view-devops","role-template-manage-devops","role-template-manage-app-templates","role-template-view-app-templates","role-template-manage-app-repos","role-template-view-app-repos","role-template-view-users","role-template-manage-users","role-template-manage-roles","role-template-view-roles"]'
      kubesphere.io/creator: system
    name: admin
  rules:
    - apiGroups:
        - '*'
      resources:
        - '*'
      verbs:
        - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: workspace-viewer
role:
  apiVersion: iam.kubesphere.io/v1alpha2
  kind: WorkspaceRole
  metadata:
    annotations:
      iam.kubesphere.io/aggregation-roles: '["role-template-view-projects","role-template-view-devops","role-template-view-app-templates","role-template-view-app-repos","role-template-view-users","role-template-view-roles"]'
      kubesphere.io/creator: system
    name: viewer
  rules:
    - apiGroups:
        - '*'
      resources:
        - '*'
      verbs:
        - get
        - list
        - watch

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: workspace-regular
role:
  apiVersion: iam.kubesphere.io/v1alpha2
  kind: WorkspaceRole
  metadata:
    annotations:
      iam.kubesphere.io/aggregation-roles: '[]'
      kubesphere.io/creator: system
    name: regular
  rules:
    - apiGroups:
        - '*'
      resources:
        - workspaces
        - workspacemembers
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - monitoring.kubesphere.io
      resources:
        - namespaces
      verbs:
        - list

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: workspace-self-provisioner
role:
  apiVersion: iam.kubesphere.io/v1alpha2
  kind: WorkspaceRole
  metadata:
    annotations:
      iam.kubesphere.io/aggregation-roles: '["role-template-create-projects","role-template-create-devops","role-template-view-app-templates","role-template-manage-app-templates"]'
      kubesphere.io/creator: system
    name: self-provisioner
  rules:
    - apiGroups:
        - '*'
      resources:
        - workspaces
        - workspacemembers
        - quotas
        - abnormalworkloads
        - pods
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - '*'
      resources:
        - namespaces
        - federatednamespaces
        - devops
        - devopsprojects
      verbs:
        - create
        - watch
    - apiGroups:
        - monitoring.kubesphere.io
      resources:
        - namespaces
        - workloads
      verbs:
        - get
        - list
    - apiGroups:
        - 'openpitrix.io'
      resources:
        - '*'
      verbs:
        - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: project-admin
  labels:
    scope.kubesphere.io/namespace: ""
    scope.kubesphere.io/devops: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/aggregation-roles: '["role-template-view-members","role-template-manage-members",
        "role-template-view-roles","role-template-manage-roles",
        "role-template-view-app-workloads","role-template-manage-app-workloads",
        "role-template-view-volumes","role-template-manage-volumes",
        "role-template-view-snapshots","role-template-manage-snapshots",
        "role-template-view-secrets","role-template-manage-secrets",
        "role-template-view-configmaps","role-template-manage-configmaps",
        "role-template-view-alerting-policies","role-template-manage-alerting-policies",
        "role-template-view-alerting-messages","role-template-manage-alerting-messages",
        "role-template-view-custom-monitoring","role-template-manage-custom-monitoring",
        "role-template-grayscale-release","role-template-image-builder",
        "role-template-view-pipelines","role-template-manage-pipelines",
        "role-template-view-credentials","role-template-manage-credentials",
        "role-template-manage-project-settings","role-template-manage-devops-settings"]'
      kubesphere.io/creator: system
    name: admin
  rules:
    - apiGroups:
        - '*'
      resources:
        - '*'
      verbs:
        - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: project-operator
  labels:
    scope.kubesphere.io/namespace: ""
    scope.kubesphere.io/devops: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/aggregation-roles: '["role-template-view-members","role-template-manage-view-roles",
        "role-template-view-app-workloads",
        "role-template-view-volumes","role-template-manage-volumes",
        "role-template-view-snapshots","role-template-manage-snapshots",
        "role-template-view-secrets","role-template-manage-secrets",
        "role-template-view-alerting-policies","role-template-manage-alerting-policies",
        "role-template-view-alerting-messages","role-template-manage-alerting-messages",
        "role-template-view-custom-monitoring","role-template-manage-custom-monitoring",
        "role-template-view-pipelines","role-template-manage-pipelines",
        "role-template-view-credentials","role-template-manage-credentials"]'
      kubesphere.io/creator: system
    name: operator
  rules:
    - apiGroups:
        - '*'
      resources:
        - '*'
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - apps
        - extensions
        - batch
        - logging.kubesphere.io
        - monitoring.kubesphere.io
        - autoscaling
        - alerting.kubesphere.io
        - openpitrix.io
        - app.k8s.io
        - servicemesh.kubesphere.io
        - operations.kubesphere.io
        - devops.kubesphere.io
        - resources
      resources:
        - '*'
      verbs:
        - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: project-viewer
  labels:
    scope.kubesphere.io/namespace: ""
    scope.kubesphere.io/devops: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/aggregation-roles: '["role-template-view-members","role-template-view-roles",
        "role-template-view-app-workloads","role-template-view-volumes","role-template-view-secrets",
        "role-template-view-alerting-configmaps","role-template-view-alerting-policies","role-template-view-custom-monitoring",
        "role-template-view-alerting-messages","role-template-view-pipelines","role-template-view-credentials"]'
      kubesphere.io/creator: system
    name: viewer
  rules:
    - apiGroups:
        - '*'
      resources:
        - '*'
      verbs:
        - get
        - list
        - watch


---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-view-alerting-messages
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/module: Monitoring & Alerting
      iam.kubesphere.io/role-template-rules: '{"alert-messages": "view"}'
      kubesphere.io/alias-name: Alerting Messages View
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-view-alerting-messages
  rules:
    - apiGroups:
        - 'alerting.kubesphere.io'
      resources:
        - '*'
      verbs:
        - get
        - list
        - watch

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-manage-alerting-messages
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/dependencies: '["role-template-view-alerting-messages"]'
      iam.kubesphere.io/module: Monitoring & Alerting
      iam.kubesphere.io/role-template-rules: '{"alert-messages": "manage"}'
      kubesphere.io/alias-name: Alerting Messages Management
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-manage-alerting-messages
  rules:
    - apiGroups:
        - 'alerting.kubesphere.io'
      resources:
        - '*'
      verbs:
        - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-view-alerting-policies
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/module: Monitoring & Alerting
      iam.kubesphere.io/role-template-rules: '{"alert-policies": "view"}'
      kubesphere.io/alias-name: Alerting Policies View
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-view-alerting-policies
  rules:
    - apiGroups:
        - 'alerting.kubesphere.io'
      resources:
        - '*'
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - 'resources.kubesphere.io'
      resources:
        - '*'
      verbs:
        - list

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-manage-alerting-policies
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/dependencies: '["role-template-view-alerting-policies"]'
      iam.kubesphere.io/module: Monitoring & Alerting
      iam.kubesphere.io/role-template-rules: '{"alert-policies": "manage"}'
      kubesphere.io/alias-name: Alerting Policies Management
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-manage-alerting-policies
  rules:
    - apiGroups:
        - 'alerting.kubesphere.io'
      resources:
        - '*'
      verbs:
        - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-view-custom-monitoring
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/module: Monitoring & Alerting
      iam.kubesphere.io/role-template-rules: '{"custom-monitoring": "view"}'
      kubesphere.io/alias-name: Custom Monitoring View
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-view-custom-monitoring
  rules:
    - apiGroups:
        - 'monitoring.kubesphere.io'
      resources:
        - '*'
      verbs:
        - get
        - list
        - watch

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-manage-custom-monitoring
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/dependencies: '["role-template-view-custom-monitoring"]'
      iam.kubesphere.io/module: Monitoring & Alerting
      iam.kubesphere.io/role-template-rules: '{"custom-monitoring": "manage"}'
      kubesphere.io/alias-name: Custom Monitoring Management
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-manage-custom-monitoring
  rules:
    - apiGroups:
        - 'monitoring.kubesphere.io'
      resources:
        - '*'
      verbs:
        - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-view-members
  labels:
    scope.kubesphere.io/namespace: ""
    scope.kubesphere.io/devops: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/module: Access Control
      iam.kubesphere.io/role-template-rules: '{"members": "view"}'
      kubesphere.io/alias-name: Project Members View
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-view-members
  rules:
    - apiGroups:
        - '*'
      resources:
        - 'members'
        - 'rolebindings'
      verbs:
        - get
        - list
        - watch

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-manage-members
  labels:
    scope.kubesphere.io/namespace: ""
    scope.kubesphere.io/devops: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/dependencies: '["role-template-view-roles", "role-template-view-members"]'
      iam.kubesphere.io/module: Access Control
      iam.kubesphere.io/role-template-rules: '{"members": "manage"}'
      kubesphere.io/alias-name: Project Members Management
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-manage-members
  rules:
    - apiGroups:
        - '*'
      resources:
        - 'members'
        - 'rolebindings'
      verbs:
        - '*'


---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-namespace-basic
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/role-template-rules: '{"basic": "view"}'
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-view-basic
  rules:
    - apiGroups:
        - '*'
      resources:
        - 'namespaces'
        - 'quotas'
        - 'abnormalworkloads'
        - 'workloads'
        - 'limitranges'
        - 'events'
      verbs:
        - get
        - list
        - watch

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-devops-basic
  labels:
    scope.kubesphere.io/devops: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/role-template-rules: '{"basic": "view"}'
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-view-basic
  rules:
    - apiGroups:
        - '*'
      resources:
        - 'devops'
        - 'devopsprojects'
      verbs:
        - get
        - list
        - watch

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-manage-project-settings
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/module: Project Settings
      iam.kubesphere.io/role-template-rules: '{"project-settings": "manage"}'
      kubesphere.io/alias-name: Project Settings
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-manage-project-settings
  rules:
    - apiGroups:
        - '*'
      resources:
        - '*'
      verbs:
        - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-view-roles
  labels:
    scope.kubesphere.io/namespace: ""
    scope.kubesphere.io/devops: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/module: Access Control
      iam.kubesphere.io/role-template-rules: '{"roles": "view"}'
      kubesphere.io/alias-name: Project Roles View
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-view-roles
  rules:
    - apiGroups:
        - '*'
      resources:
        - 'roles'
      verbs:
        - get
        - list
        - watch

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-manage-roles
  labels:
    scope.kubesphere.io/namespace: ""
    scope.kubesphere.io/devops: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/dependencies: '["role-template-view-roles"]'
      iam.kubesphere.io/module: Access Control
      iam.kubesphere.io/role-template-rules: '{"roles": "manage"}'
      kubesphere.io/alias-name: Project Roles Management
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-manage-roles
  rules:
    - apiGroups:
        - '*'
      resources:
        - 'roles'
      verbs:
        - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-view-app-workloads
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/dependencies: '["role-template-view-volumes","role-template-view-secrets","role-template-view-configmaps"]'
      iam.kubesphere.io/module: Application Workloads
      iam.kubesphere.io/role-template-rules: '{"applications":"view","deployments":"view","statefulsets":"view",
        "daemonsets":"view","jobs":"view","cronjobs":"view","pods":"view","services":"view","ingresses":"view"}'
      kubesphere.io/alias-name: Application Workloads View
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-view-app-workloads
  rules:
    - apiGroups:
        - '*'
      resources:
        - services
        - applications
        - controllerrevisions
        - deployments
        - replicasets
        - statefulsets
        - daemonsets
        - jobs
        - cronjobs
        - pods
        - pods/log
        - services
        - ingresses
        - router
      verbs:
        - get
        - list
        - watch

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-manage-app-workloads
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/dependencies: '["role-template-view-app-workloads"]'
      iam.kubesphere.io/module: Application Workloads
      iam.kubesphere.io/role-template-rules: '{"applications":"manage","deployments":"manage","statefulsets":"manage",
        "daemonsets":"manage","jobs":"manage","cronjobs":"manage","pods":"manage","services":"manage","ingresses":"manage"}'
      kubesphere.io/alias-name: Application Workloads Management
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-manage-app-workloads
  rules:
    - apiGroups:
        - '*'
      resources:
        - services
        - applications
        - controllerrevisions
        - deployments
        - replicasets
        - statefulsets
        - daemonsets
        - jobs
        - cronjobs
        - pods
        - pods/log
        - services
        - ingresses
        - router
      verbs:
        - '*'
    - apiGroups:
        - '*'
      resources:
        - 'secrets'
      verbs:
        - list

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-grayscale-release
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/dependencies: '["role-template-manage-app-workloads"]'
      iam.kubesphere.io/module: Application Workloads
      iam.kubesphere.io/role-template-rules: '{"grayscale-release": "manage"}'
      kubesphere.io/alias-name: Grayscale Release
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-grayscale-release
  rules:
    - apiGroups:
        - 'servicemesh.kubesphere.io'
      resources:
        - '*'
      verbs:
        - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-image-builder
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/dependencies: '["role-template-manage-app-workloads"]'
      iam.kubesphere.io/module: Application Workloads
      iam.kubesphere.io/role-template-rules: '{"image-builder": "manage"}'
      kubesphere.io/alias-name: Image Builder
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-image-builder
  rules:
    - apiGroups:
        - 'devops.kubesphere.io'
      resources:
        - s2ibinaries
        - s2ibinaries/file
        - s2ibuilders
        - s2ibuildertemplates
        - s2iruns
      verbs:
        - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-view-configmaps
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/module: Configuration Center
      iam.kubesphere.io/role-template-rules: '{"configmaps": "view"}'
      kubesphere.io/alias-name: ConfigMaps View
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-view-configmaps
  rules:
    - apiGroups:
        - '*'
      resources:
        - 'configmaps'
      verbs:
        - get
        - list
        - watch


---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-manage-configmaps
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/dependencies: '["role-template-view-configmaps"]'
      iam.kubesphere.io/module: Configuration Center
      iam.kubesphere.io/role-template-rules: '{"configmaps": "manage"}'
      kubesphere.io/alias-name: ConfigMaps Management
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-manage-configmaps
  rules:
    - apiGroups:
        - '*'
      resources:
        - 'configmaps'
      verbs:
        - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-view-secrets
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/module: Configuration Center
      iam.kubesphere.io/role-template-rules: '{"secrets": "view"}'
      kubesphere.io/alias-name: Secrets View
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-view-secrets
  rules:
    - apiGroups:
        - '*'
      resources:
        - 'secrets'
      verbs:
        - get
        - list
        - watch


---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-manage-secrets
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/dependencies: '["role-template-view-secrets"]'
      iam.kubesphere.io/module: Configuration Center
      iam.kubesphere.io/role-template-rules: '{"secrets": "manage"}'
      kubesphere.io/alias-name: Secrets Management
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-manage-secrets
  rules:
    - apiGroups:
        - '*'
      resources:
        - 'secrets'
      verbs:
        - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-view-volumes
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/dependencies: '["role-template-view-snapshots"]'
      iam.kubesphere.io/module: Storage Management
      iam.kubesphere.io/role-template-rules: '{"volumes": "view"}'
      kubesphere.io/alias-name: Volumes View
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-view-volumes
  rules:
    - apiGroups:
        - '*'
      resources:
        - 'persistentvolumeclaims'
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - '*'
      resources:
        - 'pods'
      verbs:
        - 'list'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-manage-volumes
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/dependencies: '["role-template-view-volumes","role-template-manage-snapshots"]'
      iam.kubesphere.io/module: Storage Management
      iam.kubesphere.io/role-template-rules: '{"volumes": "manage"}'
      kubesphere.io/alias-name: Volumes Management
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-manage-volumes
  rules:
    - apiGroups:
        - '*'
      resources:
        - 'persistentvolumeclaims'
      verbs:
        - '*'
    - apiGroups:
        - '*'
      resources:
        - 'pods'
      verbs:
        - 'list'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-view-snapshots
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/module: Storage Management
      iam.kubesphere.io/role-template-rules: '{"snapshots": "view"}'
      kubesphere.io/alias-name: Volume Snapshots View
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-view-snapshots
  rules:
    - apiGroups:
        - '*'
      resources:
        - 'volumesnapshots'
      verbs:
        - get
        - list
        - watch

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-manage-snapshots
  labels:
    scope.kubesphere.io/namespace: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/dependencies: '["role-template-view-snapshots"]'
      iam.kubesphere.io/module: Storage Management
      iam.kubesphere.io/role-template-rules: '{"snapshots": "manage"}'
      kubesphere.io/alias-name: Volume Snapshots Management
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-manage-snapshots
  rules:
    - apiGroups:
        - '*'
      resources:
        - 'volumesnapshots'
      verbs:
        - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-manage-credentials
  labels:
    scope.kubesphere.io/devops: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/dependencies: '["role-template-view-credentials"]'
      iam.kubesphere.io/module: Credentials Management
      kubesphere.io/alias-name: Credentials Management
      iam.kubesphere.io/role-template-rules: '{"credentials": "manage"}'
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-manage-credentials
  rules:
    - apiGroups:
        - '*'
      resources:
        - credentials
      verbs:
        - '*'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-manage-pipelines
  labels:
    scope.kubesphere.io/devops: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/dependencies: '["role-template-view-pipelines", "role-template-view-credentials"]'
      iam.kubesphere.io/module: Pipelines Management
      kubesphere.io/alias-name: Pipelines Management
      iam.kubesphere.io/role-template-rules: '{"pipelines": "manage"}'
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-manage-pipelines
  rules:
    - apiGroups:
        - '*'
      resources:
        - 'pipelines'
        - 'pipelines/runs'
        - 'pipelines/branches'
        - 'pipelines/checkScriptCompile'
        - 'pipelines/consolelog'
        - 'pipelines/scan'
        - 'pipelines/sonarstatus'
      verbs:
        - '*'
    - apiGroups:
        - '*'
      resources:
        - credentials
      verbs:
        - get
        - list
        - watch

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-view-credentials
  labels:
    scope.kubesphere.io/devops: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/module: Credentials Management
      kubesphere.io/alias-name: Credentials View
      iam.kubesphere.io/role-template-rules: '{"credentials": "view"}'
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-view-credentials
  rules:
    - apiGroups:
        - '*'
      resources:
        - credentials
      verbs:
        - 'get'
        - 'list'
        - 'watch'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-view-pipelines
  labels:
    scope.kubesphere.io/devops: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/module: Pipelines Management
      kubesphere.io/alias-name: Pipelines View
      iam.kubesphere.io/role-template-rules: '{"pipelines": "view"}'
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-view-pipelines
  rules:
    - apiGroups:
        - '*'
      resources:
        - 'pipelines'
        - 'pipelines/runs'
        - 'pipelines/branches'
        - 'pipelines/checkScriptCompile'
        - 'pipelines/consolelog'
        - 'pipelines/scan'
        - 'pipelines/sonarstatus'
        - 'checkCron'
        - 'credentials'
        - 'credentials/usage'
      verbs:
        - 'get'
        - 'list'
        - 'watch'

---
apiVersion: iam.kubesphere.io/v1alpha2
kind: RoleBase
metadata:
  name: role-template-manage-devops-settings
  labels:
    scope.kubesphere.io/devops: ""
role:
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    annotations:
      iam.kubesphere.io/module: DevOps Settings
      kubesphere.io/alias-name: DevOps Settings
      iam.kubesphere.io/role-template-rules: '{"devops-settings": "manage"}'
    labels:
      iam.kubesphere.io/role-template: "true"
    name: role-template-manage-devops-settings
  rules:
    - apiGroups:
        - '*'
      resources:
        - 'devops'
        - 'devopsprojects'
      verbs:
        - '*'